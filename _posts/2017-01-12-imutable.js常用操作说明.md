---
layout:     post
title:      Hello 2017
subtitle:    "\"Hello World, Hello Blog\""
date:       2017-01-12
author:     leesx
header-img: img/post-bg-2015.jpg
catalog: true
tags:
    - ç”Ÿæ´»
---

> â€œðŸ™‰ðŸ™‰ðŸ™‰ â€

## [imutable.jså¸¸ç”¨æ“ä½œ](http://note.youdao.com/noteshare?id=696c9ae671c7e51f10979778186a71f7)

### [å‚è€ƒæ–‡æ¡£](https://www.w3ctech.com/topic/1595)

![imutable](http://img.alicdn.com/tps/i3/TB1VinpKXXXXXXAXpXXZ_OdNFXX-715-324.png)

###### Immutable.fromJS()æ ¼å¼åŒ–è¿‡çš„jsæ•°æ®ï¼Œé‡Œé¢æ•°æ®æ˜¯å¯¹è±¡çš„å¯ä»¥ä½¿ç”¨å¯¹åº”çš„Mapä¸­çš„æ–¹æ³•ï¼Œé‡Œé¢æ•°æ®æ˜¯æ•°ç»„çš„å¯ä»¥ä½¿ç”¨å¯¹åº”çš„Listæ–¹æ³•
ã€‚

### ç¤ºä¾‹
`var $$state = Immutable.fromJS({a:[2,3,4]})`
##### å¯¹äºŽå•å±‚æ•°æ®ä½¿ç”¨updateï¼Œå‡ºçŽ°å¤šå±‚åµŒå¥—çš„æ•°æ®ï¼Œä½¿ç”¨updateIn`

`$$state.update('a',list=>list.set(0,55)).toJS() // {a:[55,3,4]} //è®¾ç½®æˆ–è€…ä¿®æ”¹æŸä¸€é¡¹çš„å€¼ `
##### æ·»åŠ  åŒæ•°ç»„æ–¹æ³•
`$$state.update('a',list=>list.push(10)).toJS() // // {a:[2,3,4,10]}`

#####  åˆ é™¤ åŒæ•°ç»„çš„splice éœ€è¦ä¼ å…¥è¦åˆ é™¤é¡¹çš„ç´¢å¼•
`$$state.update('a',list=>list.delete(0)).toJS() // {a:[3,4]}`

##### æ¸…ç©ºæ•°ç»„ä¸­çš„æ•°æ®
`$$state.update('a',list=>list.clear()).toJS() // {a:[]}`

##### åˆ é™¤æ•°ç»„çš„æœ€åŽä¸€é¡¹

`$$state.update('a',list=>list.pop()).toJS() // {a:[2,3]}`

##### å‘æ•°ç»„çš„ç¬¬ä¸€é¡¹æ·»åŠ æ•°æ®

`$$state.update('a',list=>list.unshift(20)).toJS()  // {a:[20,2,3,4]}`

##### æ›´æ–°æ•°ç»„çš„æŸä¸€é¡¹

`$$state.update('a',list=>list.update(0,list2=>list2 = 99)).toJS() // {a:[99,3,4]}`

##### åˆå¹¶æ•°ç»„ ä¼šå°†å¯¹åº”ç´¢å¼•çš„é¡¹è¦†ç›–,å¦‚æžœæ²¡æœ‰å¯¹åº”çš„ç´¢å¼•ï¼Œåˆ™æ·»åŠ 

`$$state.update('a',list=>list.merge([99,4,5,10])).toJS() // {a:[99,4,5,10]}`

##### æ³¨æ„ä½¿ç”¨keyPath [0,1] æ—¶,å¯¹Listç±»åž‹ä¸å¤ªå¥½ä½¿,fromJSå¤„ç†è¿‡çš„å¯ä»¥ä½¿ç”¨
```
var imArr = Immutable.fromJS([2,3,[3,4,5,[6,7,8]]])
imArr.setIn([2,0],88).toJS() //å¯¹ ç¬¬3é¡¹çš„ç¬¬ä¸€é¡¹ä¿®æ”¹
```
```
var data1 = Immutable.fromJS({ a: { b: { c: 10 } } });
//mergeDeepä¸éœ€è¦å†™å›žè°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦ä¿®æ”¹çš„å€¼
data1.mergeDeep(['a','b','c'],22).toJS()

mergeInå’ŒupdateInçš„åŒºåˆ« mergeInä¸éœ€è¦å†™å›žè°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦ä¿®æ”¹çš„å€¼;updateInéœ€è¦äº›å›žè°ƒå‡½æ•°ï¼Œåœ¨å›žè°ƒå‡½æ•°é‡Œé¢ä¿®æ”¹å‚æ•°
d.updateIn(['a','b'],abc=>abc.merge({c:666})).toJS()
```
#### æ ¹æ®ä¸€ç»„ç´¢å¼•åˆ é™¤æŽ‰æ•°ç»„ä¸­å¯¹åº”çš„æ•°æ®

```
//eg.åŽŸç”Ÿjs
var arr = ['aaa','bbb','ccc','ddd'];
var indexArr = [0,3,2];
arr.filter((item2,index)=> indexArr.indexOf(index) !==-1) // ['bbb']


//eg. ImutableJSå¯¹åº”çš„æ–¹æ³•

var data = Immutable.fromJS({a:[{a:11},{a:22},{a:33},{a:44}]})
var indexArr = [1,3];
data.updateIn('a',list=>list.filter((v,index)=> indexArr.indexOf(index) === -1)).toJS() // {a:[{a:11},{a:33}]}

```
